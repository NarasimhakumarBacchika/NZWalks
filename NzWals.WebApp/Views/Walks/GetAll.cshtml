@model IEnumerable<WalksVM>
@{
    ViewData["Title"] = " GetAll ";
}

<div class="container mt-5">
    <h2 class="mb-4 text-center">All Walks</h2>

    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Name</th>
                <th>Description (km)</th>
                <th>LengthInKm</th>
                <th>WalkImageUrl</th>
                <th>Diffculty (km)</th>
                <th>Region</th>
            </tr>
        </thead>
        <tbody id="walksTableBody">
            <!-- Data will be inserted here -->
        </tbody>
    </table>

    <div id="error" class="text-danger text-center mt-3"></div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", async () => {
        try {
            const response = await fetch("http://localhost:5085/api/Walk");
            const walks = await response.json();

            const tableBody = document.getElementById("walksTableBody");

            if (response.ok) {
                     walks.forEach(walk => {
                     const row = document.createElement("tr");
                     row.innerHTML = `
                     <td>${walk.name}</td>
                     <td>${walk.description}</td>
                     <td>${walk.lengthInKm}</td>
                     <td><img src="${walk.walkImageUrl}" alt="Walk Image" width="100" /></td>
                     <td>${walk.diffculty?.name ?? 'N/A'}</td>
                     <td>${walk.region?.name ?? 'N/A'}</td>
                 `;
                   tableBody.appendChild(row);
                   });

            } else {
                document.getElementById("error").innerText = "Failed to load walks.";
            }
        } catch (error) {
            console.error("Error fetching walks:", error);
            document.getElementById("error").innerText = "Server error. Try again later.";
        }
    });
</script>


